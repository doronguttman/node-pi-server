"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = __importDefault(require("express"));
const logging_1 = __importDefault(require("./middleware/logging"));
const static_files_1 = __importDefault(require("./middleware/static-files"));
const index_1 = __importDefault(require("./api/index"));
const port = process.env["PORT"] && Number(process.env["PORT"]) || 80;
const app = express_1.default();
app.use(logging_1.default.logRequestResponse);
index_1.default(app);
app.use("/", static_files_1.default.mount(`${__dirname}/../static`));
app.use(logging_1.default.logErrors);
app.listen(port, () => {
    console.log(`Listening on port: ${port}`);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3NlcnZlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLHNEQUE4QjtBQUM5QixtRUFBcUQ7QUFDckQsNkVBQThEO0FBQzlELHdEQUFrQztBQUVsQyxNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3RFLE1BQU0sR0FBRyxHQUFHLGlCQUFPLEVBQUUsQ0FBQztBQUV0QixHQUFHLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLGtCQUFrQixDQUFDLENBQUM7QUFFOUMsZUFBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBRWIsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsc0JBQXFCLENBQUMsS0FBSyxDQUFDLEdBQUcsU0FBUyxZQUFZLENBQUMsQ0FBQyxDQUFDO0FBQ3BFLEdBQUcsQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUM7QUFFckMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFO0lBQ2xCLE9BQU8sQ0FBQyxHQUFHLENBQUMsc0JBQXNCLElBQUksRUFBRSxDQUFDLENBQUM7QUFDOUMsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgbG9nZ2luZ01pZGRsZXdhcmUgZnJvbSBcIi4vbWlkZGxld2FyZS9sb2dnaW5nXCI7XHJcbmltcG9ydCBzdGF0aWNGaWxlc01pZGRsZXdhcmUgZnJvbSBcIi4vbWlkZGxld2FyZS9zdGF0aWMtZmlsZXNcIjtcclxuaW1wb3J0IGluaXRBcGkgZnJvbSBcIi4vYXBpL2luZGV4XCI7XHJcblxyXG5jb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnZbXCJQT1JUXCJdICYmIE51bWJlcihwcm9jZXNzLmVudltcIlBPUlRcIl0pIHx8IDgwO1xyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcblxyXG5hcHAudXNlKGxvZ2dpbmdNaWRkbGV3YXJlLmxvZ1JlcXVlc3RSZXNwb25zZSk7XHJcblxyXG5pbml0QXBpKGFwcCk7XHJcblxyXG5hcHAudXNlKFwiL1wiLCBzdGF0aWNGaWxlc01pZGRsZXdhcmUubW91bnQoYCR7X19kaXJuYW1lfS8uLi9zdGF0aWNgKSk7XHJcbmFwcC51c2UobG9nZ2luZ01pZGRsZXdhcmUubG9nRXJyb3JzKTtcclxuXHJcbmFwcC5saXN0ZW4ocG9ydCwgKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYExpc3RlbmluZyBvbiBwb3J0OiAke3BvcnR9YCk7XHJcbn0pO1xyXG4iXX0=